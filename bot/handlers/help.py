from aiogram import Router
from aiogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.filters import Command

router = Router()

@router.message(Command("help"))
async def help_command(message: Message):
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –±–æ—Ç—É"""
    
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text="üë§ –ü—Ä–æ—Ñ–∏–ª—å", callback_data="help_profile"),
            InlineKeyboardButton(text="üçΩ –ü–∏—Ç–∞–Ω–∏–µ", callback_data="help_meal")
        ],
        [
            InlineKeyboardButton(text="‚úÖ –ß–µ–∫-–∏–Ω—ã", callback_data="help_checkin"),
            InlineKeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", callback_data="help_stats")
        ],
        [
            InlineKeyboardButton(text="üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞", callback_data="help_analytics"),
            InlineKeyboardButton(text="üí≥ –ü–æ–¥–ø–∏—Å–∫–∞", callback_data="help_subscription")
        ],
        [
            InlineKeyboardButton(text="‚ùì FAQ", callback_data="help_faq"),
            InlineKeyboardButton(text="üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞", url="https://t.me/support")
        ]
    ])
    
    help_text = """
üìö **–°–ø—Ä–∞–≤–∫–∞ –ø–æ FitnessBot**

–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –¥–æ—Å—Ç–∏—á—å —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–ª–µ–π —á–µ—Ä–µ–∑:
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
‚Ä¢ –£–º–Ω—É—é –∞–¥–∞–ø—Ç–∞—Ü–∏—é –ø—Ä–∏ –ø–ª–∞—Ç–æ
‚Ä¢ –ú–æ—Ç–∏–≤–∞—Ü–∏—é –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

üöÄ /start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
üë§ /profile - –¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
üçΩ /meal_plan - –ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é
‚úÖ /checkin - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —á–µ–∫-–∏–Ω
üìä /stats - –ì—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
üìà /analytics - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è
üí≥ /subscription - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
üîó /integrations - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–µ–∫–µ—Ä–æ–≤
‚è∞ /reminder_settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚öôÔ∏è /settings - –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1Ô∏è‚É£ **–£—Ç—Ä–æ:** –°–¥–µ–ª–∞–π —É—Ç—Ä–µ–Ω–Ω–∏–π —á–µ–∫-–∏–Ω (–≤–µ—Å, —Å–æ–Ω, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ)
2Ô∏è‚É£ **–î–µ–Ω—å:** –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π –µ–¥—É, —Å–ª–µ–¥–∏ –∑–∞ –≤–æ–¥–æ–π
3Ô∏è‚É£ **–í–µ—á–µ—Ä:** –ó–∞–ø–∏—à–∏ —à–∞–≥–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
4Ô∏è‚É£ **–ù–µ–¥–µ–ª—è:** –ü–æ–ª—É—á–∏ –Ω–æ–≤—ã–π –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è
5Ô∏è‚É£ **–ú–µ—Å—è—Ü:** –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π —Ü–µ–ª–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Premium:**
‚Ä¢ AI-–∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –µ–¥—ã
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–∏ –ø–ª–∞—Ç–æ
‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–∫–µ—Ä–∞–º–∏
‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–í—ã–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
"""
    
    await message.answer(help_text, reply_markup=keyboard, parse_mode="Markdown")

@router.callback_query(lambda c: c.data.startswith("help_"))
async def help_sections(callback):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–¥–µ–ª–æ–≤ —Å–ø—Ä–∞–≤–∫–∏"""
    section = callback.data.replace("help_", "")
    
    sections_content = {
        "profile": """
üë§ **–ü—Ä–æ—Ñ–∏–ª—å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤–µ—Å, —Ä–æ—Å—Ç, –≤–æ–∑—Ä–∞—Å—Ç)
‚Ä¢ –¶–µ–ª–∏ –∏ —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
‚Ä¢ –†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ö–ë–ñ–£
‚Ä¢ –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏

**–ö–æ–º–∞–Ω–¥—ã:**
‚Ä¢ /profile - –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è
‚Ä¢ /settings - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚Ä¢ /update_weight - –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Å
‚Ä¢ /update_goal - –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–ª—å

üí° –°–æ–≤–µ—Ç: –û–±–Ω–æ–≤–ª—è–π –≤–µ—Å —Ä–µ–≥—É–ª—è—Ä–Ω–æ –¥–ª—è —Ç–æ—á–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞!
""",
        
        "meal": """
üçΩ **–ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è**

–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –Ω–∞ –Ω–µ–¥–µ–ª—é:
‚Ä¢ –ó–∞–≤—Ç—Ä–∞–∫, –æ–±–µ–¥, —É–∂–∏–Ω, –ø–µ—Ä–µ–∫—É—Å
‚Ä¢ –†–∞—Å—Å—á–∏—Ç–∞–Ω –ø–æ–¥ —Ç–≤–æ–∏ –ö–ë–ñ–£
‚Ä¢ –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –∞–ª–ª–µ—Ä–≥–∏–∏
‚Ä¢ –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –Ω–∞ –Ω–µ–¥–µ–ª—é

**–§—É–Ω–∫—Ü–∏–∏:**
‚Ä¢ –ó–∞–º–µ–Ω–∞ –ª—é–±–æ–≥–æ –±–ª—é–¥–∞
‚Ä¢ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF –ø–ª–∞–Ω–∞
‚Ä¢ –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
‚Ä¢ –§–æ—Ç–æ-–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ä—Ü–∏–π

üí° –°–æ–≤–µ—Ç: –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π –µ–¥—É –¥–ª—è AI-–∞–Ω–∞–ª–∏–∑–∞ –∫–∞–ª–æ—Ä–∏–π!
""",
        
        "checkin": """
‚úÖ **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —á–µ–∫-–∏–Ω—ã**

**–£—Ç—Ä–µ–Ω–Ω–∏–π —á–µ–∫-–∏–Ω:**
‚Ä¢ –í–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –Ω–∞—Ç–æ—â–∞–∫
‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞
‚Ä¢ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ

**–í–µ—á–µ—Ä–Ω–∏–π —á–µ–∫-–∏–Ω:**
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
‚Ä¢ –í—ã–ø–∏—Ç–∞—è –≤–æ–¥–∞
‚Ä¢ –ó–∞–º–µ—Ç–∫–∏ –æ –¥–Ω–µ

**–§–æ—Ç–æ –µ–¥—ã:**
‚Ä¢ AI –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –±–ª—é–¥–æ
‚Ä¢ –ü–æ–¥—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π –∏ –ë–ñ–£
‚Ä¢ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø–ª–∞–Ω–æ–º

üí° –°–æ–≤–µ—Ç: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ —á–µ–∫-–∏–Ω—ã = —Ç–æ—á–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞!
""",
        
        "stats": """
üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏**

–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ç—á–µ—Ç—ã:
‚Ä¢ –ì—Ä–∞—Ñ–∏–∫ –≤–µ—Å–∞ —Å —Ç—Ä–µ–Ω–¥–æ–º
‚Ä¢ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—à–∞–≥–∏ –∏ –≤–æ–¥–∞)
‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞
‚Ä¢ –ü—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ü–µ–ª–∏
‚Ä¢ –ù–µ–¥–µ–ª—å–Ω—ã–µ –∏ –º–µ—Å—è—á–Ω—ã–µ —Å–≤–æ–¥–∫–∏

**–ß—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è:**
‚Ä¢ –î–∏–Ω–∞–º–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚Ä¢ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–µ–π
‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–æ
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

üí° –°–æ–≤–µ—Ç: –°–º–æ—Ç—Ä–∏ –≥—Ä–∞—Ñ–∏–∫–∏ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏!
""",
        
        "analytics": """
üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è**

–£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞:
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–æ
‚Ä¢ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–∞–ª–æ—Ä–∏–π –∏ –º–∞–∫—Ä–æ—Å–æ–≤
‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–æ—Ä—ã–≤–∞ –∑–∞—Å—Ç–æ—è
‚Ä¢ –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

**–§—É–Ω–∫—Ü–∏–∏:**
‚Ä¢ –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
‚Ä¢ –ü–ª–∞–Ω –ø—Ä–æ—Ä—ã–≤–∞ –ø–ª–∞—Ç–æ (7 –¥–Ω–µ–π)
‚Ä¢ –î–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ä—ã–≤—ã
‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

üí° –°–æ–≤–µ—Ç: –ü—Ä–∏ –ø–ª–∞—Ç–æ –Ω–µ –ø–∞–Ω–∏–∫—É–π - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!
""",
        
        "subscription": """
üí≥ **–ü–æ–¥–ø–∏—Å–∫–∞ Premium**

**–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç:**
‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
‚úÖ AI-–∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –µ–¥—ã
‚úÖ –ê–≤—Ç–æ–∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–∏ –ø–ª–∞—Ç–æ
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—Ä–µ–∫–µ—Ä–∞–º–∏
‚úÖ PDF –æ—Ç—á–µ—Ç—ã –∏ –ø–ª–∞–Ω—ã
‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ü–ª–∞–Ω—ã:**
‚Ä¢ –ú–µ—Å—è—Ü - 299‚ÇΩ
‚Ä¢ 3 –º–µ—Å—è—Ü–∞ - 699‚ÇΩ (—ç–∫–æ–Ω–æ–º–∏—è 22%)
‚Ä¢ –ì–æ–¥ - 1999‚ÇΩ (—ç–∫–æ–Ω–æ–º–∏—è 44%)

üí° –ü—Ä–æ–º–æ–∫–æ–¥ WELCOME20 - —Å–∫–∏–¥–∫–∞ 20% –Ω–∞ –ø–µ—Ä–≤—ã–π –º–µ—Å—è—Ü!
""",
        
        "faq": """
‚ùì **–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã**

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è?**
A: –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –±–ª—é–¥–æ –≤ –ø–ª–∞–Ω–µ?**
A: –î–∞, –ª—é–±–æ–µ –±–ª—é–¥–æ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–ª–∞—Ç–æ?**
A: –ò—Å–ø–æ–ª—å–∑—É–π /analytics –¥–ª—è –∞–≤—Ç–æ–∞–¥–∞–ø—Ç–∞—Ü–∏–∏

**Q: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ?**
A: AI –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–ª—é–¥–æ –∏ —Å—á–∏—Ç–∞–µ—Ç –∫–∞–ª–æ—Ä–∏–∏

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ñ–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç?**
A: –î–∞, —á–µ—Ä–µ–∑ /integrations (Google Fit, Apple Health)

**Q: –ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É?**
A: /subscription ‚Üí –û—Ç–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ

**Q: –ï—Å—Ç—å –ª–∏ –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥?**
A: –î–∞, 7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ù–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç? –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É!
"""
    }
    
    back_keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ —Å–ø—Ä–∞–≤–∫–µ", callback_data="back_to_help")]
    ])
    
    content = sections_content.get(section, "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ")
    await callback.message.edit_text(content, reply_markup=back_keyboard, parse_mode="Markdown")
    await callback.answer()

@router.callback_query(lambda c: c.data == "back_to_help")
async def back_to_help(callback):
    """–í–æ–∑–≤—Ä–∞—Ç –∫ –≥–ª–∞–≤–Ω–æ–º—É –º–µ–Ω—é —Å–ø—Ä–∞–≤–∫–∏"""
    await help_command(callback.message)
    await callback.answer()